{% extends "base.html" %}
{% block content %}
<section style="width: 100%;height:100vh;">
    <div
        style="width: 100%;height:350px;background-image:url({{profile.background_image.url}});background-repeat: no-repeat;background-position:center center;margin:0; background-size: auto;">
        <!--  -->
    </div>
    <div style="width: 100%;height:600px;padding:5%;display:flex;align-items:center;">
        <div style="width: 70%;display:flex;align-items:center;">
            <div style="width:200px;display:flex;flex-direction:column;align-items:center;">
                <img style="border-radius: 50%;width: 100px;height: 100px;" src="{{profile.avatar.url}}" alt="">
                <strong>{{profile.user.username}}</strong>
            </div>
            <div >
                {{profile.bio}}

            </div>
          

        </div>
        <div style="width:30% ;display:flex;gap:35px;">
            <div style="display: flex;flex-direction:column;">
                <h3>Following</h3>
                <!-- {% for following in profile.follows.all %}
                <a style="text-decoration: none;color:#000;" href="{% url 'show-profile' following.id %}">{{following}}</a>
                {% endfor %} -->
                <p>{{following_count}}</p>
            </div>
            <br>
            <div style="display: flex;flex-direction:column;">
                <h3>Followers</h3>
                <!-- {% for follower in profile.followed_by.all %}
                <a style="text-decoration: none;color:#000;" href="{% url 'show-profile' follower.id %}">{{follower}}</a>              
                {% endfor %} -->
                <p>{{profile.followed_by.all.count}}</p>
            </div>
        </div>

        <div>
            <form method="post" action="">
                {% csrf_token %}
                {% if profile in user.profile.follows.all %}
                <button name="follow" value="unfollow" class="btn btn-danger">Unfollow</button>
                {% else %}
                <button name="follow" value="follow" class="btn btn-success">Follow</button>
                {% endif %}
            </form>
        </div>
    </div>
    <div style="padding: 20px;text-align:center;width:100vw;">
        <h2>Recent Posts</h2>
        <div class="profile-grid">

            {% for posts in posts %}
            {% if posts.image.url|slice:"-4:" == ".mp4" %}
            {% else %}
            <div class="postss" style="border-radius:5px;padding:1rem;box-shadow: rgba(0, 0, 0, 0.55) 0px 5px 15px;">
                <div style="display: flex;flex-direction:column;align-items:center;height: 100%;width:100%;">
                    <img class="img-fluid" style="border-radius: 5px;aspect-ratio:1/1;" width="400px" height="350px"
                        src="{{  posts.image.url  }}" alt="Image ">
                    <strong style="text-align: center;">{{posts.desription}}</strong>
                </div>
            </div>
            {% endif %}
            {% endfor %}

        </div>
    </div>

    {% endblock %}