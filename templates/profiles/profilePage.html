{% extends "base.html" %}
{% block content %}
<div style="width: 80%;margin:auto;display:flex;flex-direction:column;align-items:center;">
    <!-- background-image:url({{profile.background_image.url}});background-repeat: no-repeat; background-size: auto;background-position:center center;object-fit:cover; -->
    <div
        style="border-radius:4px;margin:auto;width: 100%;height:450px;">
        <img src="{{profile.background_image.url}}" style="border-radius:5px;max-height:100%; width:100%; background-image:url({{profile.background_image.url}});background-repeat: no-repeat; background-size: auto;background-position:center center;object-fit:cover;" alt="">
    </div>
    <div style="width: 100%;height:200px;display:flex;padding:5%;align-items:center;background-color:#fff;">
        <div style="width: 100%;display:flex;align-items:center;">
            <div style="width:200px;display:flex;flex-direction:column;align-items:center;">
                <img style="border-radius: 50%;width: 200px;height: 200px;margin-top:-100px;border:5px solid #fff;" src="{{profile.avatar.url}}" alt="">
                <strong style="font-size: 34px;">{{profile.user.username}}</strong>
            </div>
            <!-- <div style="width: 500px;height:350px;border-radius:4px;box-shadow: 5px 5px 0 8px rgba(0,0,0, 0.1);">
                {{profile.bio}}

            </div> -->


        </div>
        <div class="follow_count" style="display:flex;gap:35px;">
            <div class="follow_count_count" style="display: flex;flex-direction:column;">
                <h3>Following</h3>
                <!-- {% for following in profile.follows.all %}
                <a style="text-decoration: none;color:#000;" href="{% url 'show-profile' following.id %}">{{following}}</a>
                {% endfor %} -->
                <p>{{following_count}}</p>
            </div>
            <br>
            <div class="follow_count_count" style="display: flex;flex-direction:column;">
                <h3>Followers</h3>
                <!-- {% for follower in profile.followed_by.all %}
                <a style="text-decoration: none;color:#000;" href="{% url 'show-profile' follower.id %}">{{follower}}</a>              
                {% endfor %} -->
                <p>{{profile.followed_by.all.count}}</p>
            </div>
            <div>
                <form method="post" action="">
                    {% csrf_token %}
                    {% if profile in user.profile.follows.all %}
                    <button name="follow" value="unfollow" class="btn btn-danger">Unfollow</button>
                    {% else %}
                    <button name="follow" value="follow" class="btn btn-success">Follow</button>
                    {% endif %}
                </form>
            </div>
        </div>

       
    </div>

    {% if profile.is_private == "False" or profile in user.profile.follows.all %}
    <div style="padding: 20px;text-align:center;width:100%;">
        <h2>Recent Posts</h2>
        <div class="profile-grid">

            {% for posts in posts %}
            {% if posts.image.url|slice:"-4:" == ".mp4" %}
            {% else %}
            <div class="postss" style="border-radius:5px;padding:1rem;box-shadow: rgba(0, 0, 0, 0.55) 0px 5px 15px;">
                <div style="display: flex;flex-direction:column;align-items:center;height: 100%;width:100%;">
                    <img class="img-fluid" style="border-radius: 5px;aspect-ratio:1/1;" width="400px" height="350px"
                        src="{{  posts.image.url  }}" alt="Image ">
                    <strong style="text-align: center;">{{posts.desription}}</strong>
                </div>
            </div>
            {% endif %}
            {% endfor %}

        </div>
    </div> 
    {% else %}
    <div>
        <h2>Private Account</h2>
    </div>
    {% endif %}
    
</div>







{% endblock %}