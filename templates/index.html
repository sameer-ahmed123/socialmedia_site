<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://unpkg.com/htmx.org@1.8.0"></script>
</head>

<body>
    <div style="height:100vh;display:flex;align-items:center;justify-content:space-around;">
        <div style="height:500px;width:400px;background:grey;display:flex;align-items:center;justify-content:center;">
            {% if user.is_authenticated %}
            <div>
                <h3>Logout</h3>
                <a style="appearance: auto;
                writing-mode: horizontal-tb !important;
                text-rendering: auto;
                color: buttontext;
                letter-spacing: normal;
                word-spacing: normal;
                line-height: normal;
                text-transform: none;
                text-indent: 0px;
                text-shadow: none;
                display: inline-block;
                text-align: center;
                align-items: flex-start;
                cursor: default;
                box-sizing: border-box;
                background-color: buttonface;
                margin: 0em;
                padding: 1px 6px;
                border-width: 2px;
                border-style: outset;
                border-color: buttonborder;
                border-image: initial;
                cursor:pointer;" href="/logout">Logout</a>
            </div>
            {% else %}
            {% include "login-form.html" %}
            {% endif %}

        </div>
        <br>

        <div style="width:400px;height:500px;background:grey;overflow-y: auto;padding:10px;" hx-get="show"
            hx-trigger=" revealed ">
            <div class="htmx-indicator">Loading..</div>
        </div>

    </div>

    <!--    will need to learn how to show content as agax with htmx-->

    <script>
        function ModalComment() {
            window.modal_dialog.showModal()
        }
    </script>

    <script src="{% static 'jquery-3.6.0.js' %}" type="text/javascript"></script>
    <script>
        $(document).on('click', '.btn_1', function (e) {
            e.preventDefault();
            $.ajax({
                type: 'POST',
                url: '{% url "post_like" %}',
                data: {
                    postid: $(this).data("post-id"),
                    csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
                    action: 'post'
                },
                success: (json) => {
                    $('#like_count' + $(this).data("post-id")).html(json['result'])
                    $(this).html(json['like_unlike'])
                    console.log(json)
                    console.log($(this).data("post-id"))
                },
                error: function (xhr, errmsg, err) {
                    console.error(xhr, errmsg, err)
                }
            });
        })



    </script>
</body>

</html>